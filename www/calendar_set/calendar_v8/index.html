<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <title>리듬앤조이 일정표</title>

    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="img/logo.png" />

    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard-dynamic-subset.min.css"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" href="css/calendar.css" />
    <link rel="stylesheet" href="home_infopage/popup.css" />
  </head>
  <body>
    <!-- 팝업 배경 -->
    <div id="popupOverlay" class="popup-overlay" style="display: none"></div>

    <!-- 팝업 박스 -->
    <div id="popupBox" class="popup" style="display: none">
      <div id="popupContent"></div>
    </div>

    <!-- 내부 팝업용 오버레이 -->
    <div
      id="innerPopupOverlay"
      class="popup-overlay"
      style="display: none; z-index: 10002"
    ></div>

    <!-- 내부 팝업 박스 -->
    <div id="innerPopupBox" class="popup" style="display: none; z-index: 10003">
      <div id="innerPopupContent"></div>
    </div>

    <!-- 왼쪽 메뉴 iframe (데스크탑) -->
    <iframe
      id="leftMenuFrame"
      src="left-menu.html"
      style="display: none"
    ></iframe>

    <!-- 왼쪽 메뉴 (모바일 오프캔버스) -->
    <div
      class="offcanvas offcanvas-start text-bg-dark"
      tabindex="-1"
      id="leftMenu"
      aria-labelledby="leftMenuLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="leftMenuLabel">메뉴</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>

      <!-- 모바일용 메뉴 iframe -->
      <div class="offcanvas-body" style="padding: 0">
        <iframe
          src="left-menu.html"
          style="width: 100%; height: 100%; border: none"
        ></iframe>
      </div>
    </div>

    <!-- 오른쪽 iframe -->
    <iframe
      id="sideFrame"
      src="https://voluble-mochi-a91544.netlify.app/"
      style="display: none"
    ></iframe>

    <div class="app-container">
      <header class="calendar-header">
        <div class="month-nav-group">
          <button class="month-nav-btn" id="prevMonthBtn" title="이전 달">◀</button>
          <h1 class="calendar-title" id="calendarTitle">11월</h1>
          <button class="month-nav-btn" id="nextMonthBtn" title="다음 달">▶</button>
        </div>

        <button class="admin-btn" id="adminBtn" title="관리자 모드">⚙️</button>
      </header>

      <main class="calendar-main" id="calendarContainer">
        <div class="loading">로딩 중...</div>
      </main>

      <footer class="bottom-controls">
        <div class="logo-section">
          <div class="logo-circle">
            <img src="img/logo.png" alt="리듬앤조이" style="width: 100%; height: 100%; object-fit: cover;">
          </div>
          <span class="logo-text">리듬앤조이 연습실</span>
        </div>

        <button class="info-btn" id="infoBtn"><span>▶</span> 예약 정보</button>
      </footer>

      <nav class="room-selector">
        <button
          class="room-btn active"
          data-room="a"
          style="background-color: #f6bf26"
        >
          A
        </button>
        <button
          class="room-btn active"
          data-room="b"
          style="background-color: rgb(87, 150, 200)"
        >
          B
        </button>
        <button
          class="room-btn active"
          data-room="c"
          style="background-color: rgb(129, 180, 186)"
        >
          C
        </button>
        <button
          class="room-btn active"
          data-room="d"
          style="background-color: rgb(125, 157, 106)"
        >
          D
        </button>
        <button
          class="room-btn active"
          data-room="e"
          style="background-color: #4c4c4c; color: #fff"
        >
          E
        </button>
        <button class="room-btn" id="allRoomsBtn">ALL</button>
        <div class="week-nav">
          <button class="period-btn active">월</button>
          <button class="period-btn">주</button>
          <button class="nav-btn-round" id="prevWeekBtn">&lt;</button>
          <button class="today-btn" id="todayBtn">오늘</button>
          <button class="nav-btn-round" id="nextWeekBtn">&gt;</button>
        </div>
      </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="env.js"></script>
    <script src="js/config.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/calendar-core.js"></script>
    <script src="js/main.js"></script>
    <script src="home_infopage/open_popup.js"></script>

    <script>
      // 연락처 복사 함수
      function copy() {
        var copyTxt = document.getElementById("copyTxt");
        copyTxt.select();
        copyTxt.setSelectionRange(0, 99999);

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard
            .writeText(copyTxt.value)
            .then(() => {
              alert("010-4801-7180 복사되었습니다.");
              copyTxt.blur();
            })
            .catch((err) => {
              console.error("복사 실패:", err);
              alert("복사에 실패했습니다.");
            });
        } else {
          try {
            document.execCommand("copy");
            alert("010-4801-7180 복사되었습니다.");
            copyTxt.blur();
          } catch (err) {
            console.error("복사 실패:", err);
            alert("복사에 실패했습니다. 수동으로 복사해주세요.");
          }
        }
      }
    </script>
  </body>
</html>
